


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
  <title>Tim Robinson</title>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
<link rel="alternate" type="application/atom+xml" title="Atom 1.0"
href="/blog/feed/atom" />

<link rel='stylesheet' href='/css/pygments_murphy.css' type='text/css' />
<link rel='stylesheet' href='/css/pygments_monokai.css' type='text/css' />
<link rel='stylesheet' href='/css/site.css' type='text/css' />
<link rel='stylesheet' href='/css/documentation.css' type='text/css' />
<link rel='stylesheet' href='/css/jquery.tweet.css' type='text/css' />

<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/js/jquery.tweet.js"></script>
<script type="text/javascript" src="/js/googleRSSWidget.js"></script>
<script type="text/javascript" src="/js/site.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8369986-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  </head>
  <body>
    <div id="content">
      
  
<div id="top_bar">
  <div class="ButtonBar">
      <div id="plugbanner"></div>
      <div id="blog_logo"></div>
      <h1><a href="/blog/">
          <span id="blog_name">
            Tim Robinson
          </span>
        </a>
      </h1>
  </div>
  <div id="search">    
    <form id="searchform" method="get" action="http://www.google.com/search">
      <input type="hidden" name="ie" value="UTF-8">
      <input type="hidden" name="oe" value="UTF-8">
      <input type="hidden" name="domains" value="www.partario.com">
      <input type="hidden" name="sitesearch" value="www.partario.com">
      <input name="q" id="q" size="20" value="search in blog..." onfocus="if(this.value==this.defaultValue) this.value='';" type="text">
    </form>
  </div>
</div>


      <div id="main_block">
        <div id="prose_block">
          
  



<div class="blog_post" id="new-npackage-binaries">
  <a class="blog_post_title" name="New NPackage binaries" />
  <h2 class="blog_post_title"><a href="/blog/2010/05/new-npackage-binaries.html" rel="bookmark" title="Permanent Link to New NPackage binaries">New NPackage binaries</a></h2>
  <small>May 16, 2010 at 06:57 PM | categories: 

<a href='/blog/category/npackage'>NPackage</a>
 | <a href="http://www.partario.com/blog/2010/05/new-npackage-binaries.html#disqus_thread">View Comments</a>
  </small>
  <span class="post_prose">
    
  <p id="p1">I've <a href="http://sethgodin.typepad.com/seths_blog/2005/03/dont_shave_that.html">shaved two yaks</a> this weekend:</p>
<ul>
<li>
<p id="p2">Ported the NPackage <code>install</code> command to F#. There shouldn't be any visible change in the application: rather, F# lets me write more succinct code for handling HTTP and package dependencies. (Specifically, I was able to replace a lot of my boilerplace C# code with a <a href="http://msdn.microsoft.com/en-us/library/dd233182.aspx">computation workflow</a> that takes care of deciding which files need to be downloaded again and which ones can be left alone.)</p>
</li>
<li>
<p id="p3">Set up an instance of <a href="http://www.jetbrains.com/teamcity/">TeamCity</a> to take the source code from GitHub and build binaries for me. This isn't a version 1.0 release yet, but you're welcome to download the binaries and help me test them.</p>
</li>
</ul>
<p id="p4"><strong><a href="http://build.partario.com/guestAuth/repository/download/bt2/.lastSuccessful/NPackage.zip">Download the most recent NPackage binaries</a></strong></p>
<p id="p5">PS last week I promised I'd implement package dependencies. I haven't done that yet.</p>
<p id="p6">PPS here's another .NET packaging system to look out for: <a href="http://strangelights.com/blog/archive/2010/05/16/1661.aspx">Sebastien Lambla's OpenWrap</a></p>

  </span>
</div>



  <div class="after_post"><a href="http://www.partario.com/blog/2010/05/new-npackage-binaries.html#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  



<div class="blog_post" id="this-week-on-npackage">
  <a class="blog_post_title" name="This week on NPackage" />
  <h2 class="blog_post_title"><a href="/blog/2010/05/this-week-on-npackage.html" rel="bookmark" title="Permanent Link to This week on NPackage">This week on NPackage</a></h2>
  <small>May 09, 2010 at 08:19 PM | categories: 

<a href='/blog/category/npackage'>NPackage</a>
 | <a href="http://www.partario.com/blog/2010/05/this-week-on-npackage.html#disqus_thread">View Comments</a>
  </small>
  <span class="post_prose">
    
  <p id="p1"><a href="http://github.com/timrobinson/NPackage">Browse the NPackage source on GitHub</a></p>
<p id="p2">I implemented the local package database idea that I mentioned last weekend. Now the NPackage client downloads a <a href="http://np.partario.com/packages.js">packages.js</a> file that describes every version of every package; now you don't have to specify full package file URLs with version numbers. I've also switched to <a href="http://en.wikipedia.org/wiki/JSON">JSON</a> syntax for the package files, instead of using my hand-made Yaml-ish parser.</p>
<p id="p3">I want to do at least two more things before putting togther an NPackage version 1.0 release:</p>
<ul>
<li>Packages should be able to depend on other packages. These dependencies should consist of a package name and, optionally, the range of version numbers that are acceptable. NPackage will pick the latest version of each package that satisfies all the version number constraints.</li>
<li>Developers should be able to set up a local package repository that takes prececdence over the web site</li>
</ul>
<p id="p4">Hopefully I'll at least have dependencies working by next weekend.</p>

  </span>
</div>



  <div class="after_post"><a href="http://www.partario.com/blog/2010/05/this-week-on-npackage.html#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  



<div class="blog_post" id="first-six-npackage-packages">
  <a class="blog_post_title" name="First six NPackage packages" />
  <h2 class="blog_post_title"><a href="/blog/2010/05/first.html" rel="bookmark" title="Permanent Link to First six NPackage packages">First six NPackage packages</a></h2>
  <small>May 03, 2010 at 03:49 PM | categories: 

<a href='/blog/category/npackage'>NPackage</a>
 | <a href="http://www.partario.com/blog/2010/05/first.html#disqus_thread">View Comments</a>
  </small>
  <span class="post_prose">
    
  <p id="p1"><a href="http://github.com/timrobinson/NPackage">Browse the NPackage source on GitHub</a></p>
<p id="p2">This weekend I've had a couple of productive sessions on NPackage and I'm pretty happy with how it's working out.</p>
<p id="p3">I've set up package files on Amazon S3 for the following libraries:</p>
<ul>
<li><a href="http://np.partario.com/log4net-1.2.10/log4net.np">log4net</a></li>
<li><a href="http://np.partario.com/cecil-0.6/cecil.np">Mono Cecil</a></li>
<li><a href="http://np.partario.com/nhibernate-2.1.2/nhibernate.np">NHibernate</a></li>
<li><a href="http://np.partario.com/nunit-2.5.5.10112/nunit.np">NUnit</a></li>
<li><a href="http://np.partario.com/rhino.mocks-3.6/rhino.mocks.np">Rhino Mocks</a></li>
<li><a href="http://np.partario.com/sharpziplib-0.85.5/sharpziplib.np">SharpZipLib</a></li>
</ul>
<p id="p4">These six packages test a few different scenarios:</p>
<ul>
<li>NUnit and SharpZipLib are needed to build NPackage itself</li>
<li>Rhino Mocks is a good test because the download URL doesn't resemble the name of the file that gets downloaded; I had to write code to parse the HTTP Content-Disposition header to make sense of it</li>
<li>Cecil is an example of a library that's distributed with the rest of Mono, which is supplied as a large .tar.gz archive (the other libraries on the list above are all .zip files)</li>
<li>NHibernate is an example of a library that has its own dependencies, i.e. log4net</li>
</ul>
<p id="p5">Although NPackage is working nicely for its own development, I need to put in more work before the installation process is simple enough. Right now the <a href="http://github.com/timrobinson/NPackage/blob/master/scripts/install">command to install NPackage's own dependencies</a> looks like this:</p>
<div class="pygments_murphy"><pre>NPackage http://np.partario.com/nunit-2.5.5.10112/nunit.np \
         http://np.partario.com/sharpziplib-0.85.5/sharpziplib.np
</pre></div>

<p id="p6">I'd like to simplify it to this:</p>
<div class="pygments_murphy"><pre>np install nunit sharpziplib
</pre></div>

<p id="p7">To do this I'll need to handle dependencies properly. I expect I'll need to drop the approach of putting package descriptions in their own files: the client will need to contain enough intelligence to put together a dependency graph and install the right versions of the right packages. It will be easier to do this if the client can download a central package database list and make its decisions based on the descriptions within there.</p>
<p id="p8">I envisage having local databases that can contain a few local packages and delegate the rest to the central list on the web. I'd also like the client to be self-contained enough to carry on working even if this central package server falls over: the client should cache the most recent version of the list and work from there.</p>

  </span>
</div>



  <div class="after_post"><a href="http://www.partario.com/blog/2010/05/first.html#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  



<div class="blog_post" id="npackage-news">
  <a class="blog_post_title" name="NPackage news" />
  <h2 class="blog_post_title"><a href="/blog/2010/04/npackage-news.html" rel="bookmark" title="Permanent Link to NPackage news">NPackage news</a></h2>
  <small>April 27, 2010 at 01:00 PM | categories: 

<a href='/blog/category/npackage'>NPackage</a>
 | <a href="http://www.partario.com/blog/2010/04/npackage-news.html#disqus_thread">View Comments</a>
  </small>
  <span class="post_prose">
    
  <p id="p1">I've had some time over the last couple of evenings to do some coding, so I've made a start on my package manager. So far I'm calling it <strong>NPackage</strong>.</p>
<p id="p2">I defined a Yaml-format package file, containing the package name, description, version number; the name and email address of the maintainer; and an optional field for the URL of the download site. The package file then contains a list of libraries (i.e. .NET assembles) contributed by the package, with download URLs specified relative to the download site. </p>
<p id="p3">The idea behind making the download URL optional is that these package files can point to an existing download site for established libraries like NUnit. If the download URL is omitted then the NPackage client will look for binaries on the NPackage server, in the same location as the package file itself. A lot of libraries are going to be distributed in .zip files, so I was planning on having the NPackage client download these .zip files and unpack them into the layout dictated by the package file.</p>
<p id="p4">I'm using NPackage to develop NPackage, which means I had to hack together the parsing and download code myself without any unit testing framework or parsing library. Now that I've done that, I've hand-crafted a package file for NUnit (<code>nunit.np</code>) that'll let me start writing unit tests.</p>
<p id="p5">There are a few areas I'm not sure about:</p>
<ul>
<li>I've started writing it in C#, but I'm tempted to switch to F#, at least for the core functionality. I'm expecting to need some strong dependency graph logic (for dependencies between packages and between files within a package), which will be easier to code in F#. However I'd like to be able to be able to build the sources on Mono, and I'm not aware of a standard way of invoking the F# compiler from a Mono build process.</li>
<li>I'm only dealing with binary distribution for now (and <a href="http://en.wikipedia.org/wiki/XCOPY_deployment">xcopy deployment</a> at that). Building .NET libraries from source in a standard way could be tricky.</li>
<li>I've picked a <a href="http://en.wikipedia.org/wiki/Yaml">Yaml</a>-based file format over XML because I expect these package files to be created by hand. As a result, it's going to be harder to generate or parse these files as part of an automated build system.</li>
</ul>
<p id="p6">Here's the notes I made before I got started:</p>
<blockquote>
<ol>
<li>Find the package</li>
<li>Package files like in cabal</li>
<li>A couple of standard locations: Hackage-like web server, internal source control repository</li>
<li>Package identified by: name and version</li>
<li>Deal with variants (like: 2.0 vs 3.5 vs 4.0; 32-bit vs 64-bit) by having separate packages released at the same time</li>
<li>Install dependencies</li>
<li>Package files declare their own dependencies, cabal style</li>
<li>Recursively fetch and install dependencies</li>
<li>Download the code</li>
<li>Package file specifies location of source code (default is src/ directory relative to package file)</li>
<li>Packages can release binaries only, e.g. NUnit, log4net etc. get downloaded from their normal locations</li>
<li>Support fetching from source control as well as HTTP? - may make sense for internal deployments, what about mixing matching SCC systems?</li>
<li>Build the code</li>
<li>Skip this if the package just has binaries</li>
<li>Reference the binaries</li>
<li>Update VS solution and project files</li>
</ol>
</blockquote>

  </span>
</div>



  <div class="after_post"><a href="http://www.partario.com/blog/2010/04/npackage-news.html#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
  



<div class="blog_post" id=".net-package-manager-feedback">
  <a class="blog_post_title" name=".NET package manager feedback" />
  <h2 class="blog_post_title"><a href="/blog/2010/04/net-package-manager-feedback.html" rel="bookmark" title="Permanent Link to .NET package manager feedback">.NET package manager feedback</a></h2>
  <small>April 19, 2010 at 06:19 PM | categories: 

<a href='/blog/category/npackage'>NPackage</a>
 | <a href="http://www.partario.com/blog/2010/04/net-package-manager-feedback.html#disqus_thread">View Comments</a>
  </small>
  <span class="post_prose">
    
  <p id="p1">I don't seem to be the first one to be having problems keeping track of his .NET binaries:</p>
<ul>
<li><a href="http://twitter.com/TheColonial/status/12416813543">OJ offered to build one</a> :)</li>
<li>John Mandia poined me towards several Java-based tools: <a href="http://www.jfrog.org/products.php">Artifactory</a>, <a href="http://www.anthillpro.com/html/default.html">Antill Pro</a> and <a href="http://nexus.sonatype.org/">Nexus</a>. Of these, Artifactory and Nexus are open source. Of course, Apache <a href="http://maven.apache.org/">Maven</a> is a fairly well-known Java packaging tool.</li>
<li><a href="http://twitter.com/jimmcslim/status/12417586016">James Webster showed me</a> the <a href="http://vsdm.codeplex.com/Wikipage">Visual Studio Dependencies Manager</a>, an addin for Visual Studio 2003.</li>
</ul>
<p id="p2">Finally, <a href="http://www.partario.com/blog/2010/04/can-i-have-a-net-package-manager.html#comment-39">Terry Spitz</a> had some fairly enthusiastic feedback:</p>
<blockquote>
<p id="p3">hell yes! we've got various vbscripts to do this. shouldn't it be 'easy' in say MSI (if too heavyweight), or powershell. additional points if it can handle multi-level caching, i.e. cross-region or internet code is cached on a team share as well as locally.</p>
</blockquote>
<p id="p4">Windows Installer occurred to me when I started thinking about this. However, I think such a tool should be limited to deploying assemblies to a particular project's source tree -- deploying them via MSIs suggests putting them into a central location on each machine, and I predict that individual projects will start interfering with each other this way, particularly on a build server. On the other hand, Windows Installer does have the concept of <a href="http://en.wikipedia.org/wiki/Merge_module">merge modules</a>: mini MSIs for software components that get merged into the final application installer.</p>
<p id="p5">Terry's multi-level caching idea is nice. There should definitely be local team and Internet repositories. Additionally, geographically distributed teams probably want local caches to keep overhead to a minimum. And I noticed that my Amazon-based web server cleverly goes to a special Ubuntu package repository hosted on S3, which keeps things quick and hopefully reduces my bandwidth costs.</p>

  </span>
</div>



  <div class="after_post"><a href="http://www.partario.com/blog/2010/04/net-package-manager-feedback.html#disqus_thread">Read and Post Comments</a></div>
  <hr class="interblog" />
 <a href="/blog/page/2">Next Page Â»</a>

        </div><!-- End Prose Block -->
        
  <div class="right_sidebar">
    <div id="right_sidebar">
  <div id="links">
  <h3>About Tim</h3>
  <ul>
      <li><img src="/site_img/icon-github.png" width="16" height="16" alt="Github" valign="middle"/> Github - <a href="https://github.com/timrobinson/">timrobinson</a></li> 
      <li><img src="/site_img/icon-twitter.png" width="16" height="16" alt="Twitter" valign="middle"/> Twitter - <a href="http://twitter.com/1tgr">@1tgr</a></li> 
  </ul>
  </div>
  <div id="blog_post_list">
  <h3>Latest blog posts</h3>
  <ul>
    <li><a href="_posts/030.new_npackage_binaries.markdown">New NPackage binaries</a></li>
    <li><a href="_posts/029.this_week_on_npackage.markdown">This week on NPackage</a></li>
    <li><a href="_posts/028.first.markdown">First six NPackage packages</a></li>
    <li><a href="_posts/027.npackage_news.markdown">NPackage news</a></li>
    <li><a href="_posts/026.net_package_manager_feedback.markdown">.NET package manager feedback</a></li>
  </ul>
  </div>
  <div id="categories">
    <h3>Categories</h3>
    <ul>
     <li><a href="/blog/category/uncategorized">Uncategorized</a> (<a href="/blog/category/uncategorized/feed">rss</a>) (17)</li>
     <li><a href="/blog/category/npackage">NPackage</a> (<a href="/blog/category/npackage/feed">rss</a>) (6)</li>
     <li><a href="/blog/category/compiler">Compiler</a> (<a href="/blog/category/compiler/feed">rss</a>) (7)</li>
    </ul>
  </div> 
  <div id="archives">			
    <h3>Archives</h3>
    <ul>
      <li><a href="/blog/archive/2010/05/1" title="May 2010">May 2010</a>&nbsp;(3)</li>
      <li><a href="/blog/archive/2010/04/1" title="April 2010">April 2010</a>&nbsp;(5)</li>
      <li><a href="/blog/archive/2010/03/1" title="March 2010">March 2010</a>&nbsp;(1)</li>
      <li><a href="/blog/archive/2009/11/1" title="November 2009">November 2009</a>&nbsp;(1)</li>
      <li><a href="/blog/archive/2009/10/1" title="October 2009">October 2009</a>&nbsp;(1)</li>
      <li><a href="/blog/archive/2009/08/1" title="August 2009">August 2009</a>&nbsp;(1)</li>
      <li><a href="/blog/archive/2009/07/1" title="July 2009">July 2009</a>&nbsp;(3)</li>
      <li><a href="/blog/archive/2009/06/1" title="June 2009">June 2009</a>&nbsp;(6)</li>
      <li><a href="/blog/archive/2009/05/1" title="May 2009">May 2009</a>&nbsp;(3)</li>
      <li><a href="/blog/archive/2009/04/1" title="April 2009">April 2009</a>&nbsp;(6)</li>
    </ul>
  </div>

</div>

  </div>

      </div><!-- End Main Block -->
      <div id="footer">
        
  <p id="credits">
Powered by <a href="http://www.blogofile.com">Blogofile</a>.<br/>
<br/>
RSS feeds for <a href="http://feeds2.feedburner.com/TimRobinson">Entries</a>
 and <a
href="http://timrobinson.disqus.com/latest.rss">Comments</a>.
<br>
</p>
<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/timrobinson/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>


      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>





